---
title: "Data Analysis Project"
author: "Samantha Carey and Dorothy Hood"
date: "2023-14-04"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

In this notebook, we are analyzing data from Spotify and YouTube on artists and their top 10 songs found here: https://www.kaggle.com/datasets/salvatorerastelli/spotify-and-youtube

## Load Libraries

```{r echo=FALSE, message=FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
```

## Load and Clean Data

```{r}
# Load data and clean it

spotify_and_youtube <- read_csv("/Users/samlcarey/Desktop/j472/major_assignments/data_analysis/data/Spotify_Youtube.csv")
  cleaned_spotify_and_youtube <- spotify_and_youtube %>%
  clean_names() 
  
```

## Exploratory Analysis

1. In our data set, it seems that there are 28 columns and 20,718 rows. In this case, a lot of information!

2. The data includes various artists' top 10 songs and their information on Spotify and YouTube, including streams, URLs, albums and more. There is also data on each songs' danceability, energy, loudness, and more. 

## Limitations and Flaws

1. The first column, labeled "x1," lists out the artists' top 10 songs in number from zero to nine. For example, 0 to 9 in the data set count 10 songs by Gorillaz. It does this all the way down the data set, continuing with 10-19, then 20-29, etc. 

We thought this was a bit of an organizations flaw as first, there is no accurately-titled column name, and starting a count of 10 from zero to nine is a bit off to the eye. We could get rid of that column but I think it's nice to see an ordered list for each artist. What we can do is rename the column, which we think could be something like "artist_10_songs_listed." 

```{r}
cleaned_spotify_and_youtube <- cleaned_spotify_and_youtube %>%  
  rename(artist_10_songs_listed = x1)
```

2. The data under "album_type" either shows if a song is part of an album,a single or a compilation. We think the column name should reflect that better than being called "album_type" as that doesn't necessarily mean single or compilation. 

3. The "duration_ms" column lists out all of the songs' lenghts in milliseconds, which is a bit inconvenient to look at versus seeing the length in minutes and seconds. We think we can make this easier by dividing each value in that column by 60,000 (60,000 milliseconds in a minute) and adding a new column to see that length in minutes. 

4. There are some N/A's in the stream column which doesn't make sense since there is a YouTube link. When you check the songs on YouTube, like the "Best Friend (Remix)" by 50 Cent, it shows a view count. 

```{r}
cleaned_spotify_and_youtube <- cleaned_spotify_and_youtube %>% 
  mutate(duration_minutes = duration_ms/60000)
```

There are now 29 columns, and it seems some of the values didn't carry over another minute (some say > 60 seconds like 3.71 for the first song for example). Maybe we can figure out a way to specify this further. 

## Other Limits in Timeframe, What is and isn't Included, Definitions, etc.

1. The data notes on Kaggle mention that the data is heavily dependent on when it was collected, being Feb. 7, 2023. It also says at the top that the data page was updated 25 days ago. Obviously, songs will be streamed and listened to and have been after Feb. 7, so the numbers are probably a bit different. 

2. It's interesting to note that only likes are counted in this data and not dislikes, because many songs do have dislikes that could be significant. 

3. The data from danceability to tempo, they are all studied on a scale to provide a number to show, for example, how loud, or not loud, a song is. (Under "loudness"). The data on Kaggle lists what the numbers could mean when it comes to more or less of something, and what's considered when choosing the number. However, there isn't any calculation or explanation on how these numbers are reached. For "Key," the integers match to pitches in Pitch Class notation. We aren't super familiar with what that means so it definitely requires some research. 

To better define some of these, the information listed under each column on Kaggle does provide some insight so we can better understand where it comes from. For example, "liveness" detects the presence of an audience in the recording. 

## Does this data answer our questions?

1. How does this data compare to users who don’t watch the videos of certain songs, or use another platform that isn’t Spotify, like Apple Music?

As mentioned in notes by Professor Willis and our own data given, we can't use the data to compare Spotify and Apple Music since we only have data for Apple Music. So, we can compare YouTube and Spotify instead. We can use the amount of views on YouTube to the amount of streams on Spotify and see if more people use one platform over another, or use them the same amount.

2. Should there be a place to show the number of streams each song/video has?

As mentioned by Professor Willis and after looking at our data, our data frame doesn't help us answer this question. We decided to change this question but are stuck between two options. One would be: What artist/s has the most views/streams on Spotify and YouTube? We can use the data for this. The second question could be: Do songs that are not licensed and not official videos gets less views on YouTube? We can see this through the data as well.

3-5. These questions we can use the data to compare Spotify streams and YouTube views for songs, calculate totals and research artists' ages. We can even use Datawrapper for these to study the trends of longer or shorter songs and more or less dance-able and high/low energy songs to see the differences in popularity. 

## Any more cleaning of data based off notes from Professor Willis

1. We would like to add a seconds column to show the length of the music as well. We will do that below.

```{r}
cleaned_spotify_and_youtube <- cleaned_spotify_and_youtube %>% 
  mutate(duration_seconds = duration_ms/1000)
```

## Questions we attempted to answer

1. What songs have the most streams on YouTube and Spotify and are they older or younger artists? 

**A** On Spotify, the top five songs are: "Blinding Lights" by The Weeknd, "Shape of You" by Ed Sheeran, "Someone You Loved" by Lewis Capaldi, "rockstar (feat. 21 Savage)" by Post Malone and "Sunflower - Spider-Man: Into the Spider-Verse" by Post Malone. 

The Weeknd is 33 years old, Ed Sheeran is 32 years old, Lewis Capaldi is 26 years old and Post Malone is 27 years old. It seems here the age range follows the mid-to-late 20s and early 30s age range for popular music artists with the most Spotify streams.

It's important to note here they counted this song twice to reference both artists in the song, Post Malone and Swae Lee. When you look down the data set, it shows this for other songs as well, like "Closer" by The Chainsmokers and Halsey. The stream numbers are the same but just listed out twice for both artists. 

On YouTube, the top five songs/videos are: "Despacito ft. Daddy Yankee" by Luis Fonsi, the same song listed again for number two, "Shape of You" by Ed Sheeran, "See You Again ft. Charlie Puth" by Wiz Khalifa and this song was also listed again for number five. 

Luis Fonsi is 45 years old, Daddy Yankee is 46 years old, Ed Sheeran is 32 years old like mentioned before, Wiz Khalifa is 35 years old and Charlie Puth is 31 years old. From this data, it seems the range of ages is from early 30s to mid 40s. 

After some research on YouTube and in the original data set, "Despacito" is listed twice because one is under the artist Luis Fonsi, and the other is under Daddy Yankee. It also shows on his YouTube page a couple videos for the song. The same goes for "See You Again," where it's listed below Wiz Khalifa and Charlie Puth. There also seems to be a few videos on this song on YouTube, so it's definitely a bit confusing. I'm wondering why view numbers are different. Could we or should we get rid of these duplicates?

From this, it seems that overall, an older age of artists have had more views on YouTube and more tractions versus younger artists on Spotify. YouTube was only created a year before Spotify (2005 vs. 2006), according to a quick Google search, so it's interesting to see this age shift.

**Question for Professor Willis** Would it be easier/more effective/cleaner to combine both data frames below? 

```{r}

# First, finding the top songs on Spotify

most_streams_spotify <- cleaned_spotify_and_youtube %>% 
  group_by(stream, track, artist) %>% 
  summarise(count = n()) %>% 
  arrange(desc(stream)) %>% 
  select(stream, track, artist)

# Second, finding the top songs on YouTube

most_views_youtube <- cleaned_spotify_and_youtube %>% 
  group_by(views, title, channel) %>% 
  summarise(count = n()) %>% 
  arrange(desc(views)) %>% 
  select(views, title, channel)

```

